<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>title</title>
</head>

<body>
    <canvas id="canvas" width="800" height="600" style="border:1px solid red"></canvas>
</body>

</html>
<script type="text/javascript" src="jquery-2.1.4.js"></script>
<script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

    function Clock(opt) {
        if (!opt) throw new Error("请提供参数");
        var requireArgs = "bigX,bigY,bigR".split(",");
        requireArgs.forEach(function(v) {
            if (!opt.hasOwnProperty(v)) throw new Error("请给参数提供属性:" + v)
        })
        var defaultOpt = {
            bigColor: "#335F9A",
            bigLineWidth: 2
        }
        $.extend(this, defaultOpt, opt);
        ctx.font = "20px 微软雅黑";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        // console.log(this);
        this.init();
    };
    Clock.prototype = {
        constructor: Clock,
        init: function() {
            var _this = this;
            var timer = setInterval(function() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                _this.drawBigCircle();
                _this.drawTicks();
                _this.drawPoints();
            }, 1000)
        },
        drawBigCircle: function() {
            ctx.beginPath();
            ctx.strokeStyle = this.bigColor;
            ctx.lineWidth = this.bigLineWidth;
            ctx.arc(this.bigX, this.bigY, this.bigR, 0, 2 * Math.PI);
            ctx.stroke();
        },
        drawTicks: function() {
            ctx.strokeStyle = 'black';
            var startRadian = -Math.PI / 3;
            for (var i = 0; i < 60; i++) {
                var length;
                var width;
                length = this.tick[i % 5 == 0 ? "big" : "small"].length;
                width = this.tick[i % 5 == 0 ? "big" : "small"].width;

                var singleRadian = 2 * Math.PI / 60;

                var radian = startRadian + i * singleRadian;

                var h1 = Math.sin(radian) * (this.bigR - this.bigLineWidth / 2);
                var b1 = Math.cos(radian) * (this.bigR - this.bigLineWidth / 2);
                // 七点
                var x1 = this.bigX + b1;
                var y1 = this.bigX + h1;

                var h2 = Math.sin(radian) * (this.bigR - length);
                var b2 = Math.cos(radian) * (this.bigR - length);

                //终点
                var x2 = this.bigX + b2;
                var y2 = this.bigY + h2;
                ctx.beginPath();
                ctx.lineWidth = width;
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();
                if (i % 5 == 0) {
                    this.drawText(i / 5 + 1, radian);
                }

            }

        },
        drawText: function(text, radian) {

            var h1 = Math.sin(radian) * (110);
            var b1 = Math.cos(radian) * (110);

            //起点
            var x = this.bigX + b1;
            var y = this.bigY + h1;

            ctx.fillText(text, x, y);

        },
        drawPoints: function() {
            var date = new Date();

            var hour = date.getHours();
            var minute = date.getMinutes();
            var second = date.getSeconds(); //15-->3

            //3、根据时间确定弧度
            var radian = second * 2 * Math.PI / 60 - Math.PI / 2;

            //4、指定长度
            var secondLength = 50;

            this.drawSinglePoint(radian, secondLength, "black");

            var minuteRadian = minute * 2 * Math.PI / 60 - Math.PI / 2;
            var minuteLength = 40;
            this.drawSinglePoint(minuteRadian, minuteLength, "blue");

            var hourRadian = hour * 2 * Math.PI / 12 - Math.PI / 2 + minuteRadian / 12 + radian / 144;
            var hourLength = 30;
            this.drawSinglePoint(hourRadian, hourLength, "red");

        },
        drawSinglePoint: function(radian, length, color) {
            var b1 = Math.cos(radian) * length;
            var h1 = Math.sin(radian) * length;
            var b2 = Math.cos(radian) * 10;
            var h2 = Math.sin(radian) * 10;

            var x = this.bigX + b1;
            var y = this.bigY + h1;

            ctx.beginPath();
            ctx.strokeStyle = color;

            // ctx.moveTo(this.bigX, this.bigY);
            ctx.moveTo(this.bigX - b2, this.bigY - h2);
            ctx.lineTo(x, y);
            ctx.stroke();
        }
    }
    var clock = new Clock({
        bigX: 300,
        bigY: 300,
        bigR: 150,
        bigColor: "#335F9A",
        bigLineWidth: 10,
        tick: {
            //小刻度线
            small: {
                length: 15,
                width: 4
            },
            //大刻度线
            big: {
                length: 26,
                width: 8
            }
        }
    });
</script>